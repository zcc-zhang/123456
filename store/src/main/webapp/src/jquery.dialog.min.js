!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):i("undefined"!=typeof module&&module.exports?require("jquery"):jQuery)}(function(i){var t=".j_dialogClose",e={id:"",title:"Title",isFixed:!0,hideHeader:!1,hideClose:!1,content:null,callback:null,withNoPadding:!1,withNoMinWidth:!1,bgHide:!0,escHide:!0},o={windows:i(window),lightbox:".dialog-background",section:".dialog-section",imageTag:".dialog-imageitem",imageData:{},width:0,height:0,left:0,top:0,paddingWidth:0,paddingHeight:0,resizeParams:[".dialog-section"]},n={},a={show:function(t){n=i.extend({},e,t||{}),t.content?a.dialog(t):a.lightbox(t),"function"==typeof n.onInit&&n.onInit(),o.windows.on("resize",function(){a.settings.apply(window,o.resizeParams)})},hide:function(t){var e=i(o.lightbox),a=i(o.section);n.isFixed?a.animate({marginTop:-(o.top-150),opacity:0}):a.animate({top:o.top+150,opacity:0}),e.fadeOut(function(){e.remove(),a.remove(),t&&t()})},dialog:function(i){a.install(i),o.resizeParams=[o.section,!0,!0],a.settings.apply(window,o.resizeParams)},lightbox:function(i){var t=i.clickObj.attr("data-src")||i.clickObj.attr("data-image");o.now=0,a.getImages_src(n.imagelist),a.loadImage(t,!0,a.settings),a.getNow(t)},install:function(t){var e=i("body"),a='<div class="dialog-header">'+n.title+"</div>",s='<div class="dialog-close j_dialogClose"></div>',c="",d=e.find(o.lightbox);if(n.content)l=n.content;else var l='<div class="dialog-imagelist">  <img src="" class="dialog-imageitem" /></div>  <span class="dialog-btnPrev">&lt;</span><span class="dialog-btnNext">&gt;</span>';n.hideHeader&&(a=""),n.hideClose&&(s='<div class="dialog-close j_dialogClose" style="display: none;"></div>'),n.id&&(c=' id="'+n.id+'"');var g='<div class="dialog-background'+(n.bgHide?" j_bgHide":"")+'"></div>',r='<div class="dialog-section'+(n.escHide?" j_escHide":"")+'" '+c+">"+a+'<div class="dialog-body'+(n.withNoPadding?" withNoPadding":"")+(n.withNoMinWidth?" withNoMinWidth":"")+'">'+l+"</div>"+s+"</div>";d.length?(d.stop().fadeIn(),e.find(o.section).remove()):e.append(g),e.append(r),i(o.lightbox).fadeIn(),i(o.section).show();var f=i(o.section).outerWidth()-i(o.section).width(),h=i(o.section).outerHeight()-i(o.section).height();o.paddingWidth=f,o.paddingHeight=h,n.callback&&n.callback()},getNow:function(i){for(var t=0,e=o.images.length;t<e;t++)i===o.images[t]&&(o.now=t)},getImages_src:function(t){t="string"==typeof t?i(t):t;o.images=[];for(var e=0,n=t.length;e<n;e++){var a=t.eq(e),s=a.attr("data-src")||a.attr("data-image");""!==(s=i.trim(s))&&o.images.push(s)}},loadImage:function(t,e,s){var c=new Image;c.onload=function(){0===i(".dialog-section").length&&(a.install(n),i(".dialog-btnPrev").on("click",function(){a.switchImage(!1,!1)}),i(".dialog-btnNext").on("click",function(){a.switchImage(!0,!1)})),a.setBtnSate();var c=i(o.section),d=i(o.imageTag);o.imageData={width:this.width,height:this.height,src:t},o.resizeParams=[c,d,e],s&&s.apply(window,o.resizeParams)},c.src=t},switchImage:function(i,t){i?o.now++:o.now--,o.now<0&&(o.now=o.images.length-1),o.now>o.images.length-1&&(o.now=0);var e=o.images[o.now];a.loadImage(e,t,a.settings)},setBtnSate:function(){o.images.length<2&&i(".dialog-btnPrev, .dialog-btnNext").hide()},settings:function(t,e,s){var t="string"==typeof t?i(t):t,c=i(window).height();if(n.content)t.css({left:"0px"}),o.width=t.width(),o.height=t.height();else{var d=o.imageData.width,l=o.imageData.height;o.width=d,o.height=l,116+o.height>c&&(o.height=c-116-50,o.height=o.height<500?500:o.height,o.width=Math.round(o.width*(o.height/l)))}var g=o.width+o.paddingWidth,r=o.height+o.paddingHeight+i(".dialog-header").outerHeight();if("object"==typeof e&&e.hide().attr("src",o.imageData.src).css({width:o.width,height:o.height}).fadeIn(),n.isFixed)o.left=Math.floor(g/2),o.top=Math.floor(r/2),t.css({position:"fixed",left:"50%"}),s?t.css({marginLeft:-o.left,marginTop:-o.top}):t.animate({marginLeft:-o.left,marginTop:-o.top},{queue:!1});else{var f=o.windows.scrollLeft(),h=o.windows.scrollTop(),m=i(o.lightbox).width();o.left=Math.floor((m-g)/2)+f,o.top=Math.floor((c-r)/2)+h,t.css({position:"absolute",marginLeft:0,marginTop:0}),s?t.css({left:o.left,top:o.top}):t.animate({left:o.left,top:o.top},{queue:!1})}e&&a.move(t,s)},move:function(i,t){n.isFixed&&t?i.css({marginTop:-(o.top-150)}).animate({marginTop:-o.top,opacity:1},function(){i.css("overflow","visible")}):t&&i.css({top:o.top+150}).animate({top:o.top,opacity:1},function(){i.css("overflow","visible")}),i.animate({width:o.width},{queue:!1})},cancelDefault:function(i){i.preventDefault(),i.stopPropagation()}};i.extend({sendSuccessToTop:function(t,e,o){var n='<div class="dialog-success-top">    <i class="i-icon"></i>'+t+"</div>";i("body").append(n);var a=i(".dialog-success-top"),s=a.width();a.css({"margin-left":-s/2,"margin-top":20,opacity:0}),a.animate({opacity:1,"margin-top":0},400,function(){clearTimeout(window.cc_timerSendSuccessToTop),window.cc_timerSendSuccessToTop=setTimeout(function(){a.fadeOut(function(){a.remove(),"function"==typeof o&&o()})},e||3e3)})},sendWarningToTop:function(t,e,o){var n='<div class="dialog-warning-top">    <i class="i-icon"></i>'+t+"</div>";i("body").append(n);var a=i(".dialog-warning-top"),s=a.width();a.css({"margin-left":-s/2,"margin-top":20,opacity:0}),a.animate({opacity:1,"margin-top":0},400,function(){clearTimeout(window.cc_timerSendWarningToTop),window.cc_timerSendWarningToTop=setTimeout(function(){a.fadeOut(function(){a.remove(),"function"==typeof o&&o()})},e||3e3)})},sendMsg:function(e,o,n,s){i.isFunction(o)&&(n=o,o=void 0);var c={id:"dialogTipBox",title:" ",hideHeader:!0,hideClose:!1,content:'<div class="dialog-msg">    <div class="dialog-msg-text">'+(s||"")+e+"</div></div>",callback:!1===o?null:function(){clearTimeout(window.timerDialogHide),window.timerDialogHide=setTimeout(function(){i(t).trigger("click")},o||3e3)},onClose:function(){"function"==typeof n&&n()}};a.show(c)},sendSuccess:function(t,e,o){i.sendMsg(t,e,o,'<i class="i-success"></i>')},sendWarning:function(t,e,o){i.sendMsg(t,e,o,'<i class="i-warning"></i>')},sendError:function(t,e,o){i.sendMsg(t,e,o,'<i class="i-error"></i>')},sendConfirm:function(e){var o=(e=i.extend(!0,{id:"dialogConfirmBox",title:"提示框",hideHeader:!1,hideClose:!1,withCenter:!1,withIcon:!1,autoClose:!1,timeout:3e3,width:null,noconfirm:!1,msg:"",desc:"",content:"",button:{confirm:"确认",cancel:"取消",cancelFirst:!1}},e)).button.confirm,n=e.button.cancel,s="",c="",d="",l="",g="";e.button&&(o||n)&&(s=o?'<a href="'+(o.href||"javascript:void(0);")+'" target="'+(o.target||"_self")+'" class="dialog-submit'+(!1===o.behavior?"":" j_dialogConfirm")+'"'+(e.noconfirm?' noconfirm="noconfirm"':"")+">"+(o.text||o)+"</a>":"",c=n?'<a href="'+(n.href||"javascript:void(0);")+'" target="'+(n.target||"_self")+'" class="dialog-cancel'+(!1===n.behavior?"":" j_dialogCancel")+'">'+(n.text||n)+"</a>":"",d='<div class="dialog-buttonBox">'+(e.button.cancelFirst?c+s:s+c)+"</div>"),e.withCenter&&(l+=" withCenter"),e.withIcon&&(l+=" "+("string"==typeof e.withIcon?e.withIcon:"withIcon")),null!==e.width&&(g=' style="width:'+e.width+("string"==typeof e.width?"":"px")+';"');var r='<div class="dialog-confirm'+l+'"'+g+">"+(""===e.msg?"":'<div class="dialog-msg">'+e.msg+"</div>")+(""===e.desc?"":'<div class="dialog-desc">'+e.desc+"</div>")+(""===e.content?"":'<div class="dialog-content">'+e.content+"</div>")+d+"</div>";if(e.content=r,e.autoClose){var f=e.callback||i.noop;e.callback=function(){f(),clearTimeout(window.timerDialogHide),window.timerDialogHide=setTimeout(function(){i(t).trigger("click")},e.timeout)}}a.show(e)}}),function(){var e=i(document);e.on("click",t,function(){var t,e=i(this);"function"==typeof n.onBeforeClose&&(t=n.onBeforeClose(e)),!1!==t&&(clearTimeout(window.timerDialogHide),a.hide(function(){"function"==typeof n.onClose&&n.onClose(e,t)}))}),e.on("click",".j_dialogConfirm",function(){var t,e=i(this);void 0===e.attr("noconfirm")&&("function"==typeof n.onBeforeConfirm&&(t=n.onBeforeConfirm(e)),!1!==t&&(clearTimeout(window.timerDialogHide),a.hide(function(){"function"==typeof n.onConfirm&&n.onConfirm(e,t)})))}),e.on("click",".j_dialogCancel",function(){var t,e=i(this);"function"==typeof n.onBeforeCancel&&(t=n.onBeforeCancel(e)),!1!==t&&(clearTimeout(window.timerDialogHide),a.hide(function(){"function"==typeof n.onCancel&&n.onCancel(e,t)}))}),e.on("click",".j_bgHide",function(){i(t).trigger("click")}),e.on("keyup",function(e){27==e.keyCode&&i(".j_escHide").length&&i(t).trigger("click").removeClass("j_dialogClose")})}(),i.dialog=a.show,i.dialogClose=a.hide});